#!/bin/bash

Xdefaults='Xdefaults-retina15.4'
from_path=$(dirname $0)

if [[ -e $1 ]]
then
    Xdefaults=$1
fi
cp $from_path/$Xdefaults $from_path/Xdefaults


for i in Xdefaults Xmodmap xinitrc xmobarrc xmonad/xmonad.hs xsession
do
    src=$(realpath $from_path/$i)
    install -vD -m 400 $src ${HOME}/.$i || exit 1
done

xmonad --recompile
pkill xmobar
sleep 1
xmonad --restart

exit 0
